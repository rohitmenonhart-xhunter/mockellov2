(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{577:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return a(7381)}])},7381:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return x}});var i=a(5893),r=a(7294),s=a(1019),n=a(3977),l=a(9008),c=a.n(l),d=a(7353),o=a(1163);let u=(0,n.ZF)({apiKey:"AIzaSyCuWTdQuHs_l6rvfzaxvY4y-Uzn0EARRwM",authDomain:"athentication-3c73e.firebaseapp.com",databaseURL:"https://athentication-3c73e-default-rtdb.firebaseio.com",projectId:"athentication-3c73e",storageBucket:"athentication-3c73e.firebasestorage.app",messagingSenderId:"218346867452",appId:"1:218346867452:web:58a57b37f6b6a42ec72579",measurementId:"G-3GBM5TSMLS"}),m=(0,s.N8)(u);function x(){let[e,t]=(0,r.useState)([]),[a,n]=(0,r.useState)(""),[l,u]=(0,r.useState)(30),[x,h]=(0,r.useState)(-1),[b,p]=(0,r.useState)(4),[y,v]=(0,r.useState)(!0),[g,j]=(0,r.useState)(!1),[f,w]=(0,r.useState)(""),[N,k]=(0,r.useState)("");if((0,o.useRouter)(),(0,r.useEffect)(()=>{if(g){let e=(0,s.iH)(m,"hr_auth_keys"),a=(0,s.jM)(e,e=>{e.exists()?t(Object.entries(e.val()).map(e=>{let[t,a]=e;return{id:t,value:a.value,active:a.active,createdAt:a.createdAt,description:a.description,validityDays:a.validityDays,interviewLimit:a.interviewLimit||-1,studentsPerInterview:a.studentsPerInterview||4,usedInterviews:a.usedInterviews||0}})):t([]),v(!1)});return()=>a()}},[g]),!g)return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(c(),{children:[(0,i.jsx)("title",{children:"Admin Authentication - Mockello"}),(0,i.jsx)("meta",{name:"description",content:"Admin authentication"})]}),(0,i.jsxs)("main",{className:"bg-black min-h-screen text-white",children:[(0,i.jsxs)("div",{className:"fixed inset-0 z-0",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_50%_50%,_#BE185D_0%,_transparent_25%)] opacity-20 animate-pulse"}),(0,i.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-90"})]}),(0,i.jsx)("div",{className:"relative container mx-auto px-4 py-12",children:(0,i.jsxs)(d.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-md mx-auto",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold mb-8 text-center bg-clip-text text-transparent bg-gradient-to-r from-[#BE185D] to-white",children:"Admin Authentication"}),(0,i.jsxs)("form",{onSubmit:e=>{e.preventDefault(),"Iamunique7$"===f?(j(!0),k("")):k("Invalid admin key")},className:"space-y-6",children:[(0,i.jsx)("div",{className:"bg-black/30 p-6 rounded-xl border border-[#BE185D]/20",children:(0,i.jsx)("div",{className:"space-y-4",children:(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"adminKey",className:"block text-gray-300 mb-2",children:"Admin Key"}),(0,i.jsx)("input",{type:"password",id:"adminKey",value:f,onChange:e=>w(e.target.value),className:"w-full px-4 py-3 bg-black/50 border border-[#BE185D]/20 rounded-lg focus:outline-none focus:border-[#BE185D] transition-colors text-white",required:!0})]})})}),N&&(0,i.jsx)("div",{className:"bg-red-500/10 border border-red-500/20 text-red-400 p-4 rounded-lg",children:N}),(0,i.jsx)("button",{type:"submit",className:"w-full px-8 py-4 bg-gradient-to-r from-[#BE185D] to-[#BE185D]/80 text-white rounded-full hover:shadow-[0_0_30px_-5px_#BE185D] transition-all duration-300",children:"Access Admin Dashboard"})]})]})})]})]});let D=()=>{let e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",t="";for(let a=0;a<8;a++)t+=e[Math.floor(Math.random()*e.length)];let a=(-1===x?99:Math.min(x,98)).toString().padStart(2,"0"),i=(-1===b?99:Math.min(b,98)).toString().padStart(2,"0"),r="";for(let t=0;t<4;t++)r+=e[Math.floor(Math.random()*e.length)];return"".concat(t,"-").concat(a).concat(i,"-").concat(r)},E=async()=>{if(!a.trim()){alert("Please enter a description for the key");return}try{let e=(0,s.iH)(m,"hr_auth_keys"),t=(0,s.VF)(e),i=D(),r=i.split("-")[0];await (0,s.t8)(t,{validationId:r,value:i,active:!0,createdAt:new Date().toISOString(),description:a.trim(),validityDays:l,interviewLimit:x,studentsPerInterview:b,usedInterviews:0}),n(""),u(30),h(-1),p(4)}catch(e){console.error("Error creating key:",e),alert("Failed to create key. Please try again.")}},_=async e=>{try{let t=(0,s.iH)(m,"hr_auth_keys/".concat(e.id));await (0,s.t8)(t,{validationId:e.value.split("-")[0],value:e.value,active:!e.active,createdAt:e.createdAt,description:e.description,validityDays:e.validityDays,interviewLimit:e.interviewLimit,studentsPerInterview:e.studentsPerInterview,usedInterviews:e.usedInterviews||0})}catch(e){console.error("Error toggling key status:",e),alert("Failed to update key status. Please try again.")}},I=async e=>{if(window.confirm("Are you sure you want to delete this key? This action cannot be undone."))try{let t=(0,s.iH)(m,"hr_auth_keys/".concat(e));await (0,s.Od)(t)}catch(e){console.error("Error deleting key:",e),alert("Failed to delete key. Please try again.")}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(c(),{children:[(0,i.jsx)("title",{children:"Admin Dashboard - Mockello"}),(0,i.jsx)("meta",{name:"description",content:"Manage HR authentication keys"})]}),(0,i.jsxs)("main",{className:"bg-black min-h-screen text-white",children:[(0,i.jsxs)("div",{className:"fixed inset-0 z-0",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_50%_50%,_#BE185D_0%,_transparent_25%)] opacity-20 animate-pulse"}),(0,i.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-90"})]}),(0,i.jsx)("div",{className:"relative container mx-auto px-4 py-12",children:(0,i.jsxs)(d.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-4xl mx-auto",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold mb-8 bg-clip-text text-transparent bg-gradient-to-r from-[#BE185D] to-white",children:"HR Authentication Keys"}),(0,i.jsxs)("div",{className:"bg-black/30 p-6 rounded-xl border border-[#BE185D]/20 mb-8",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold text-[#BE185D] mb-4",children:"Create New Key"}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("input",{type:"text",value:a,onChange:e=>n(e.target.value),placeholder:"Enter key description",className:"w-full px-4 py-3 bg-black/50 border border-[#BE185D]/20 rounded-lg focus:outline-none focus:border-[#BE185D] transition-colors text-white placeholder-gray-500"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-gray-300 mb-2",children:"Validity (Days)"}),(0,i.jsx)("input",{type:"number",min:"1",value:l,onChange:e=>u(parseInt(e.target.value)),className:"w-full px-4 py-3 bg-black/50 border border-[#BE185D]/20 rounded-lg focus:outline-none focus:border-[#BE185D] transition-colors text-white"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-gray-300 mb-2",children:"Interview Limit"}),(0,i.jsx)("input",{type:"number",min:"-1",value:x,onChange:e=>h(parseInt(e.target.value)),placeholder:"-1 for no limit",className:"w-full px-4 py-3 bg-black/50 border border-[#BE185D]/20 rounded-lg focus:outline-none focus:border-[#BE185D] transition-colors text-white"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-gray-300 mb-2",children:"Students per Interview"}),(0,i.jsx)("input",{type:"number",min:"1",value:b,onChange:e=>p(parseInt(e.target.value)),className:"w-full px-4 py-3 bg-black/50 border border-[#BE185D]/20 rounded-lg focus:outline-none focus:border-[#BE185D] transition-colors text-white"})]})]}),(0,i.jsx)("button",{onClick:E,className:"w-full px-6 py-3 bg-[#BE185D] text-white rounded-lg hover:bg-[#BE185D]/80 transition-colors",children:"Generate Key"})]})]}),(0,i.jsxs)("div",{className:"bg-black/30 p-6 rounded-xl border border-[#BE185D]/20",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold text-[#BE185D] mb-4",children:"Active Keys"}),y?(0,i.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,i.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#BE185D]"})}):e.length>0?(0,i.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,i.jsx)(d.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg border ".concat(e.active?"border-[#BE185D]/20 bg-[#BE185D]/5":"border-gray-700 bg-black/20"),children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-mono text-lg text-white mb-1",children:e.value}),(0,i.jsx)("p",{className:"text-gray-400 text-sm",children:e.description}),(0,i.jsxs)("div",{className:"text-gray-500 text-xs mt-2 space-y-1",children:[(0,i.jsxs)("p",{children:["Created: ",new Date(e.createdAt).toLocaleString()]}),(0,i.jsxs)("p",{children:["Validity: ",e.validityDays," days"]}),(0,i.jsxs)("p",{children:["Interview Limit: ",-1===e.interviewLimit?"Unlimited":e.interviewLimit]}),(0,i.jsxs)("p",{children:["Students per Interview: ",e.studentsPerInterview]}),(0,i.jsxs)("p",{children:["Used Interviews: ",e.usedInterviews||0]})]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsx)("button",{onClick:()=>_(e),className:"px-4 py-2 rounded-lg transition-colors ".concat(e.active?"bg-green-500/20 text-green-400 hover:bg-green-500/30":"bg-gray-500/20 text-gray-400 hover:bg-gray-500/30"),children:e.active?"Active":"Inactive"}),(0,i.jsx)("button",{onClick:()=>I(e.id),className:"p-2 text-red-500 hover:text-red-400 transition-colors",children:"Delete"})]})]})},e.id))}):(0,i.jsx)("div",{className:"text-center py-8 text-gray-400",children:"No keys found. Create one to get started."})]})]})})]})]})}}},function(e){e.O(0,[627,353,984,888,774,179],function(){return e(e.s=577)}),_N_E=e.O()}]);