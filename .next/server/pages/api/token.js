"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/token";
exports.ids = ["pages/api/token"];
exports.modules = {

/***/ "livekit-server-sdk":
/*!*************************************!*\
  !*** external "livekit-server-sdk" ***!
  \*************************************/
/***/ ((module) => {

module.exports = require("livekit-server-sdk");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ftoken&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Ftoken.ts&middlewareConfigBase64=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ftoken&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Ftoken.ts&middlewareConfigBase64=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_token_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/pages/api/token.ts */ \"(api)/./src/pages/api/token.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_token_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_token_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/token\",\n        pathname: \"/api/token\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_token_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnRva2VuJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGc3JjJTJGcGFnZXMlMkZhcGklMkZ0b2tlbi50cyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUNxRDtBQUNyRDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsb0RBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLG9EQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsid2VicGFjazovL21vY2tlbGxvLz85MTU3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9zcmMvcGFnZXMvYXBpL3Rva2VuLnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvdG9rZW5cIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS90b2tlblwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ftoken&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Ftoken.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./src/lib/util.ts":
/*!*************************!*\
  !*** ./src/lib/util.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateRandomAlphanumeric: () => (/* binding */ generateRandomAlphanumeric)\n/* harmony export */ });\nfunction generateRandomAlphanumeric(length) {\n    const characters = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n    let result = \"\";\n    const charactersLength = characters.length;\n    for(let i = 0; i < length; i++){\n        result += characters.charAt(Math.floor(Math.random() * charactersLength));\n    }\n    return result;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbGliL3V0aWwudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPLFNBQVNBLDJCQUEyQkMsTUFBYztJQUN2RCxNQUFNQyxhQUNKO0lBQ0YsSUFBSUMsU0FBUztJQUNiLE1BQU1DLG1CQUFtQkYsV0FBV0QsTUFBTTtJQUUxQyxJQUFLLElBQUlJLElBQUksR0FBR0EsSUFBSUosUUFBUUksSUFBSztRQUMvQkYsVUFBVUQsV0FBV0ksTUFBTSxDQUFDQyxLQUFLQyxLQUFLLENBQUNELEtBQUtFLE1BQU0sS0FBS0w7SUFDekQ7SUFFQSxPQUFPRDtBQUNUIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbW9ja2VsbG8vLi9zcmMvbGliL3V0aWwudHM/ZjgzMiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVSYW5kb21BbHBoYW51bWVyaWMobGVuZ3RoOiBudW1iZXIpOiBzdHJpbmcge1xuICBjb25zdCBjaGFyYWN0ZXJzID1cbiAgICBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5XCI7XG4gIGxldCByZXN1bHQgPSBcIlwiO1xuICBjb25zdCBjaGFyYWN0ZXJzTGVuZ3RoID0gY2hhcmFjdGVycy5sZW5ndGg7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIHJlc3VsdCArPSBjaGFyYWN0ZXJzLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjaGFyYWN0ZXJzTGVuZ3RoKSk7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuIl0sIm5hbWVzIjpbImdlbmVyYXRlUmFuZG9tQWxwaGFudW1lcmljIiwibGVuZ3RoIiwiY2hhcmFjdGVycyIsInJlc3VsdCIsImNoYXJhY3RlcnNMZW5ndGgiLCJpIiwiY2hhckF0IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/lib/util.ts\n");

/***/ }),

/***/ "(api)/./src/pages/api/token.ts":
/*!********************************!*\
  !*** ./src/pages/api/token.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handleToken)\n/* harmony export */ });\n/* harmony import */ var _lib_util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/util */ \"(api)/./src/lib/util.ts\");\n/* harmony import */ var livekit_server_sdk__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! livekit-server-sdk */ \"livekit-server-sdk\");\n/* harmony import */ var livekit_server_sdk__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(livekit_server_sdk__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst apiKey = process.env.LIVEKIT_API_KEY;\nconst apiSecret = process.env.LIVEKIT_API_SECRET;\nconst createToken = async ({ identity, metadata }, grant)=>{\n    const at = new livekit_server_sdk__WEBPACK_IMPORTED_MODULE_1__.AccessToken(apiKey, apiSecret, {\n        identity,\n        metadata\n    });\n    at.addGrant(grant);\n    return await Promise.resolve(at.toJwt());\n};\nasync function handleToken(req, res) {\n    // Only allow POST requests\n    if (req.method !== \"POST\") {\n        res.setHeader(\"Allow\", [\n            \"POST\"\n        ]);\n        res.status(405).json({\n            error: `Method ${req.method} not allowed`\n        });\n        return;\n    }\n    try {\n        if (!apiKey || !apiSecret) {\n            res.status(500).json({\n                error: \"Environment variables aren't set up correctly\"\n            });\n            return;\n        }\n        // Get session ID from request body\n        const { sessionId, metadata } = req.body;\n        // Validate session ID\n        if (!sessionId) {\n            res.status(400).json({\n                error: \"Session ID is required\"\n            });\n            return;\n        }\n        // Use session ID as room name to ensure all participants join the same room\n        const roomName = `session-${sessionId}`;\n        const identity = `identity-${(0,_lib_util__WEBPACK_IMPORTED_MODULE_0__.generateRandomAlphanumeric)(4)}`;\n        const grant = {\n            room: roomName,\n            roomJoin: true,\n            canPublish: true,\n            canPublishData: true,\n            canSubscribe: true\n        };\n        const token = await createToken({\n            identity,\n            metadata\n        }, grant);\n        const result = {\n            identity,\n            accessToken: token\n        };\n        // Log successful token generation (remove in production)\n        console.log(\"Token generated for session:\", sessionId);\n        res.status(200).json(result);\n    } catch (e) {\n        console.error(\"Token generation error:\", e);\n        res.status(500).json({\n            error: \"Failed to generate token\",\n            details: e.message\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL3Rva2VuLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFDd0Q7QUFFUDtBQUlqRCxNQUFNRSxTQUFTQyxRQUFRQyxHQUFHLENBQUNDLGVBQWU7QUFDMUMsTUFBTUMsWUFBWUgsUUFBUUMsR0FBRyxDQUFDRyxrQkFBa0I7QUFFaEQsTUFBTUMsY0FBYyxPQUNsQixFQUFFQyxRQUFRLEVBQUVDLFFBQVEsRUFBMkMsRUFDL0RDO0lBRUEsTUFBTUMsS0FBSyxJQUFJWCwyREFBV0EsQ0FBQ0MsUUFBUUksV0FBVztRQUFFRztRQUFVQztJQUFTO0lBQ25FRSxHQUFHQyxRQUFRLENBQUNGO0lBQ1osT0FBTyxNQUFNRyxRQUFRQyxPQUFPLENBQUNILEdBQUdJLEtBQUs7QUFDdkM7QUFFZSxlQUFlQyxZQUM1QkMsR0FBbUIsRUFDbkJDLEdBQW9CO0lBRXBCLDJCQUEyQjtJQUMzQixJQUFJRCxJQUFJRSxNQUFNLEtBQUssUUFBUTtRQUN6QkQsSUFBSUUsU0FBUyxDQUFDLFNBQVM7WUFBQztTQUFPO1FBQy9CRixJQUFJRyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLE9BQU8sQ0FBQyxPQUFPLEVBQUVOLElBQUlFLE1BQU0sQ0FBQyxZQUFZLENBQUM7UUFBQztRQUNqRTtJQUNGO0lBRUEsSUFBSTtRQUNGLElBQUksQ0FBQ2xCLFVBQVUsQ0FBQ0ksV0FBVztZQUN6QmEsSUFBSUcsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRUMsT0FBTztZQUFnRDtZQUM5RTtRQUNGO1FBRUEsbUNBQW1DO1FBQ25DLE1BQU0sRUFBRUMsU0FBUyxFQUFFZixRQUFRLEVBQUUsR0FBR1EsSUFBSVEsSUFBSTtRQUV4QyxzQkFBc0I7UUFDdEIsSUFBSSxDQUFDRCxXQUFXO1lBQ2ROLElBQUlHLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBeUI7WUFDdkQ7UUFDRjtRQUVBLDRFQUE0RTtRQUM1RSxNQUFNRyxXQUFXLENBQUMsUUFBUSxFQUFFRixVQUFVLENBQUM7UUFDdkMsTUFBTWhCLFdBQVcsQ0FBQyxTQUFTLEVBQUVULHFFQUEwQkEsQ0FBQyxHQUFHLENBQUM7UUFFNUQsTUFBTVcsUUFBb0I7WUFDeEJpQixNQUFNRDtZQUNORSxVQUFVO1lBQ1ZDLFlBQVk7WUFDWkMsZ0JBQWdCO1lBQ2hCQyxjQUFjO1FBQ2hCO1FBRUEsTUFBTUMsUUFBUSxNQUFNekIsWUFBWTtZQUFFQztZQUFVQztRQUFTLEdBQUdDO1FBQ3hELE1BQU11QixTQUFzQjtZQUMxQnpCO1lBQ0EwQixhQUFhRjtRQUNmO1FBRUEseURBQXlEO1FBQ3pERyxRQUFRQyxHQUFHLENBQUMsZ0NBQWdDWjtRQUU1Q04sSUFBSUcsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQ1c7SUFDdkIsRUFBRSxPQUFPSSxHQUFHO1FBQ1ZGLFFBQVFaLEtBQUssQ0FBQywyQkFBMkJjO1FBQ3pDbkIsSUFBSUcsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUNuQkMsT0FBTztZQUNQZSxTQUFTLEVBQWFDLE9BQU87UUFDL0I7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbW9ja2VsbG8vLi9zcmMvcGFnZXMvYXBpL3Rva2VuLnRzP2MyOTciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gXCJuZXh0XCI7XG5pbXBvcnQgeyBnZW5lcmF0ZVJhbmRvbUFscGhhbnVtZXJpYyB9IGZyb20gXCJAL2xpYi91dGlsXCI7XG5cbmltcG9ydCB7IEFjY2Vzc1Rva2VuIH0gZnJvbSBcImxpdmVraXQtc2VydmVyLXNka1wiO1xuaW1wb3J0IHR5cGUgeyBBY2Nlc3NUb2tlbk9wdGlvbnMsIFZpZGVvR3JhbnQgfSBmcm9tIFwibGl2ZWtpdC1zZXJ2ZXItc2RrXCI7XG5pbXBvcnQgeyBUb2tlblJlc3VsdCB9IGZyb20gXCIuLi8uLi9saWIvdHlwZXNcIjtcblxuY29uc3QgYXBpS2V5ID0gcHJvY2Vzcy5lbnYuTElWRUtJVF9BUElfS0VZO1xuY29uc3QgYXBpU2VjcmV0ID0gcHJvY2Vzcy5lbnYuTElWRUtJVF9BUElfU0VDUkVUO1xuXG5jb25zdCBjcmVhdGVUb2tlbiA9IGFzeW5jIChcbiAgeyBpZGVudGl0eSwgbWV0YWRhdGEgfTogeyBpZGVudGl0eTogc3RyaW5nOyBtZXRhZGF0YT86IHN0cmluZyB9LFxuICBncmFudDogVmlkZW9HcmFudFxuKSA9PiB7XG4gIGNvbnN0IGF0ID0gbmV3IEFjY2Vzc1Rva2VuKGFwaUtleSwgYXBpU2VjcmV0LCB7IGlkZW50aXR5LCBtZXRhZGF0YSB9KTtcbiAgYXQuYWRkR3JhbnQoZ3JhbnQpO1xuICByZXR1cm4gYXdhaXQgUHJvbWlzZS5yZXNvbHZlKGF0LnRvSnd0KCkpO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlVG9rZW4oXG4gIHJlcTogTmV4dEFwaVJlcXVlc3QsXG4gIHJlczogTmV4dEFwaVJlc3BvbnNlXG4pIHtcbiAgLy8gT25seSBhbGxvdyBQT1NUIHJlcXVlc3RzXG4gIGlmIChyZXEubWV0aG9kICE9PSAnUE9TVCcpIHtcbiAgICByZXMuc2V0SGVhZGVyKCdBbGxvdycsIFsnUE9TVCddKTtcbiAgICByZXMuc3RhdHVzKDQwNSkuanNvbih7IGVycm9yOiBgTWV0aG9kICR7cmVxLm1ldGhvZH0gbm90IGFsbG93ZWRgIH0pO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHRyeSB7XG4gICAgaWYgKCFhcGlLZXkgfHwgIWFwaVNlY3JldCkge1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogXCJFbnZpcm9ubWVudCB2YXJpYWJsZXMgYXJlbid0IHNldCB1cCBjb3JyZWN0bHlcIiB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBHZXQgc2Vzc2lvbiBJRCBmcm9tIHJlcXVlc3QgYm9keVxuICAgIGNvbnN0IHsgc2Vzc2lvbklkLCBtZXRhZGF0YSB9ID0gcmVxLmJvZHk7XG4gICAgXG4gICAgLy8gVmFsaWRhdGUgc2Vzc2lvbiBJRFxuICAgIGlmICghc2Vzc2lvbklkKSB7XG4gICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnU2Vzc2lvbiBJRCBpcyByZXF1aXJlZCcgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gVXNlIHNlc3Npb24gSUQgYXMgcm9vbSBuYW1lIHRvIGVuc3VyZSBhbGwgcGFydGljaXBhbnRzIGpvaW4gdGhlIHNhbWUgcm9vbVxuICAgIGNvbnN0IHJvb21OYW1lID0gYHNlc3Npb24tJHtzZXNzaW9uSWR9YDtcbiAgICBjb25zdCBpZGVudGl0eSA9IGBpZGVudGl0eS0ke2dlbmVyYXRlUmFuZG9tQWxwaGFudW1lcmljKDQpfWA7XG5cbiAgICBjb25zdCBncmFudDogVmlkZW9HcmFudCA9IHtcbiAgICAgIHJvb206IHJvb21OYW1lLFxuICAgICAgcm9vbUpvaW46IHRydWUsXG4gICAgICBjYW5QdWJsaXNoOiB0cnVlLFxuICAgICAgY2FuUHVibGlzaERhdGE6IHRydWUsXG4gICAgICBjYW5TdWJzY3JpYmU6IHRydWUsXG4gICAgfTtcblxuICAgIGNvbnN0IHRva2VuID0gYXdhaXQgY3JlYXRlVG9rZW4oeyBpZGVudGl0eSwgbWV0YWRhdGEgfSwgZ3JhbnQpO1xuICAgIGNvbnN0IHJlc3VsdDogVG9rZW5SZXN1bHQgPSB7XG4gICAgICBpZGVudGl0eSxcbiAgICAgIGFjY2Vzc1Rva2VuOiB0b2tlbixcbiAgICB9O1xuXG4gICAgLy8gTG9nIHN1Y2Nlc3NmdWwgdG9rZW4gZ2VuZXJhdGlvbiAocmVtb3ZlIGluIHByb2R1Y3Rpb24pXG4gICAgY29uc29sZS5sb2coJ1Rva2VuIGdlbmVyYXRlZCBmb3Igc2Vzc2lvbjonLCBzZXNzaW9uSWQpO1xuXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24ocmVzdWx0KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1Rva2VuIGdlbmVyYXRpb24gZXJyb3I6JywgZSk7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBcbiAgICAgIGVycm9yOiBcIkZhaWxlZCB0byBnZW5lcmF0ZSB0b2tlblwiLFxuICAgICAgZGV0YWlsczogKGUgYXMgRXJyb3IpLm1lc3NhZ2UgXG4gICAgfSk7XG4gIH1cbn0iXSwibmFtZXMiOlsiZ2VuZXJhdGVSYW5kb21BbHBoYW51bWVyaWMiLCJBY2Nlc3NUb2tlbiIsImFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJMSVZFS0lUX0FQSV9LRVkiLCJhcGlTZWNyZXQiLCJMSVZFS0lUX0FQSV9TRUNSRVQiLCJjcmVhdGVUb2tlbiIsImlkZW50aXR5IiwibWV0YWRhdGEiLCJncmFudCIsImF0IiwiYWRkR3JhbnQiLCJQcm9taXNlIiwicmVzb2x2ZSIsInRvSnd0IiwiaGFuZGxlVG9rZW4iLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzZXRIZWFkZXIiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJzZXNzaW9uSWQiLCJib2R5Iiwicm9vbU5hbWUiLCJyb29tIiwicm9vbUpvaW4iLCJjYW5QdWJsaXNoIiwiY2FuUHVibGlzaERhdGEiLCJjYW5TdWJzY3JpYmUiLCJ0b2tlbiIsInJlc3VsdCIsImFjY2Vzc1Rva2VuIiwiY29uc29sZSIsImxvZyIsImUiLCJkZXRhaWxzIiwibWVzc2FnZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/token.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ftoken&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Ftoken.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();